# always use forward slashes in paths
[DEFAULT]
n_cpus=auto
main_dir=P:/Synchronize/IWS/QGIS_Neckar
sep=;

[HYD_ANSYS]
show_ansys_stdout=False
hyd_ansys_runtype=before
calc_for_cats_only=True
max_cell_move=10
strm_strt_thresh=1000
#out_pre_proc_dir=${main_dir}/raster/taudem_out_horb
#in_gage_shp_loc=${main_dir}/vector/neckar_horb_Mar_2018.shp

out_pre_proc_dir=${main_dir}/raster/taudem_out_neckar_20180624
in_gage_shp_loc=${main_dir}/vector/neckar_46_stns_20180624.shp

in_dem_loc=${main_dir}/raster/lower_de_gauss_z3_100m_neckar_clip.tif

[GET_STMS]
out_dem_net_shp_file=${HYD_ANSYS:out_pre_proc_dir}/dem_net_cat_streams_only.shp
gauge_coords_field_name=id
dem_net_file=${HYD_ANSYS:out_pre_proc_dir}/dem_net_relationships.csv
out_wat_ids_file=${HYD_ANSYS:out_pre_proc_dir}/watersheds_id_modif.txt

[CREATE_STM_RELS]
# prcss_cats_list is cat nos seperated by commas
prcss_cats_list=411
hyd_mod_dir=${main_dir}/test_model
cats_prcssed_file=${hyd_mod_dir}/cats_prcssed_df.csv
stms_prcssed_file=${hyd_mod_dir}/stms_prcssed_df.csv
watershed_field_name=DN
out_cats_rel_fig_path=${hyd_mod_dir}/cats_stms_relationship.png

[CUMM_CATS]
out_cumm_cat_shp=${HYD_ANSYS:out_pre_proc_dir}/watersheds_cumm.shp
out_cumm_cat_descrip_file=${HYD_ANSYS:out_pre_proc_dir}/watersheds_cumm_cat_areas.csv

[OPT_HYD_MODEL]
# daily merged horb
# always in cumecs
in_q_file=${main_dir}/hydmod/input_hyd_data/neckar_daily_discharge_1961_2015.csv
#in_ppt_file=${main_dir}/hydmod/input_hyd_data/ppt_edk_1961_to_2015_daily_2km_horb.pkl
#in_temp_file=${main_dir}/hydmod/input_hyd_data/temp_edk_1961_to_2015_daily_2km_horb.pkl
#in_pet_file=${main_dir}/hydmod/input_hyd_data/pet_edk_1961_to_2015_daily_2km_horb.pkl
#in_cell_idxs_pkl=${main_dir}/hydmod/input_hyd_data/ppt_edk_1961_to_2015_daily_2km_horb_cell_idxs.pkl
time_freq=D
warm_up_steps=365
water_bal_step_size=730

# 12H merged horb, 2km
# always in cumecs
#in_q_file=${main_dir}/hydmod/input_hyd_data/disagg_12h_neckar_daily_discharge_1961_2015.csv
#in_ppt_file=${main_dir}/hydmod/input_hyd_data/disagg_12h_ppt_edk_1961_to_2015_daily_2km_horb.pkl
#in_temp_file=${main_dir}/hydmod/input_hyd_data/disagg_12h_temp_edk_1961_to_2015_daily_2km_horb.pkl
#in_pet_file=${main_dir}/hydmod/input_hyd_data/disagg_12h_pet_edk_1961_to_2015_daily_2km_horb.pkl
#in_cell_idxs_pkl=${main_dir}/hydmod/input_hyd_data/ppt_edk_1961_to_2015_daily_2km_horb_cell_idxs.pkl
#time_freq=12H
#warm_up_steps=730
#water_bal_step_size=1460

# 12H merged horb, 500m
# always in cumecs
#in_q_file=${main_dir}/hydmod/input_hyd_data/disagg_12h_neckar_daily_discharge_1961_2015.csv
#in_ppt_file=${main_dir}/hydmod/input_hyd_data/disagg_12h_ppt_edk_1961_to_2015_daily_500m_horb.pkl
#in_temp_file=${main_dir}/hydmod/input_hyd_data/disagg_12h_temp_edk_1961_to_2015_daily_500m_horb.pkl
#in_pet_file=${main_dir}/hydmod/input_hyd_data/disagg_12h_pet_edk_1961_to_2015_daily_500m_horb.pkl
#in_cell_idxs_pkl=${main_dir}/hydmod/input_hyd_data/ppt_edk_1961_to_2015_daily_500m_horb_cell_idxs.pkl
#time_freq=12H
#warm_up_steps=730
#water_bal_step_size=1460

# 6H merged horb
# always in cumecs
#in_q_file=${main_dir}/hydmod/input_hyd_data/disagg_6h_neckar_daily_discharge_1961_2015.csv
#in_ppt_file=${main_dir}/hydmod/input_hyd_data/disagg_6h_ppt_edk_1961_to_2015_daily_2km_horb.pkl
#in_temp_file=${main_dir}/hydmod/input_hyd_data/disagg_6h_temp_edk_1961_to_2015_daily_2km_horb.pkl
#in_pet_file=${main_dir}/hydmod/input_hyd_data/disagg_6h_pet_edk_1961_to_2015_daily_2km_horb.pkl
#in_cell_idxs_pkl=${main_dir}/hydmod/input_hyd_data/ppt_edk_1961_to_2015_daily_2km_horb_cell_idxs.pkl
#time_freq=6H
#warm_up_steps=1460
#water_bal_step_size=2920

in_ppt_file=${main_dir}/hydmod/input_hyd_data/ppt_edk_1961_to_2015_daily_2km_all.pkl
in_temp_file=${main_dir}/hydmod/input_hyd_data/temp_edk_1961_to_2015_daily_2km_all.pkl
in_pet_file=${main_dir}/hydmod/input_hyd_data/pet_edk_1961_to_2015_daily_2km_all.pkl
in_cell_idxs_pkl=${main_dir}/hydmod/input_hyd_data/ppt_edk_1961_to_2015_daily_2km_all_cell_idxs.pkl

in_date_fmt=%Y-%m-%d %H:%M:%S
start_date=1961-06-01
end_date=1979-12-31

route_type=0
kfolds=2
compare_ann_cyc_flag=True
use_obs_flow_flag=False

min_q_thresh=1e-4

obj_ftn_wts=1.0;1.0;0.0

run_as_lump_flag=False

[PARAM_BOUNDS]
tt=-2.0;2.0
cm=0.01;4.0
pcm=0.0;2.0
fc_pwp=1;700.0
beta=1e-5;10.0
ur_thr=0.0;100.0
k_uu=1e-5;1.0
k_ul=1e-5;1.0
k_d=1e-5;1.0
k_ll=1e-5;1.0
exp=0.01;10.0
musk_lag=1e-4;1.0
musk_wt=1e-4;0.3

[PLOT_OPT_RES]
plot_simple_opt_flag=True
plot_wat_bal_flag=True

[TEST_MODEL]
test_params_loc=''

[OPT_SCHM_VARS]
# opt_schm can be ROPE or DE
opt_schm=DE

# basic optimization related variables
max_iters=300
max_cont_iters=${max_iters}
obj_ftn_tol=1e-8
n_prm_vecs_exp=2.0

# DE related variables
mu_sc_fac_bds=0.01;0.5
cr_cnst_bds=0.7;1.0
prm_pcnt_tol=0.01

# ROPE related variables
# percentage NS accepted
acc_rate=0.1
n_uvecs_exp=3.5
n_rope_prm_vecs_exp=3

[PRM_FLAGS]
# one column for every variables used in optimization
# col 1: lumped parameter for all cells
# col 2: land use / land cover classes
# col 3: soil type classes
# col 4: aspect
# col 5: slope
# col 6: slope and aspect combined
tt=		1;0;0;0;0;0
cm=		1;0;0;0;0;0
pcm=	1;0;0;0;0;0
fc_pwp= 1;0;0;0;0;0
beta=	1;0;0;0;0;0
ur_thr=	1;0;0;0;0;0
k_uu=	1;0;0;0;0;0
k_ul=	1;0;0;0;0;0
k_d=	1;0;0;0;0;0
k_ll=	1;0;0;0;0;0
